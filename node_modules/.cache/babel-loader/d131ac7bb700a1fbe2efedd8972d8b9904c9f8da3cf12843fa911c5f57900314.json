{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { cartAPI } from '../utils/api';\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    items: [],\n    total: 0,\n    loading: false\n  },\n  reducers: {\n    setCart: (state, action) => {\n      console.log('Setting cart with payload:', action.payload);\n      state.items = action.payload.items || [];\n      state.total = action.payload.totalAmount || 0;\n      state.loading = false;\n    },\n    setLoading: (state, action) => {\n      state.loading = action.payload;\n    }\n  }\n});\n\n// Async actions\nexport const loadCart = userId => async dispatch => {\n  try {\n    dispatch(setLoading(true));\n    const cart = await cartAPI.getCart(userId);\n    console.log('Cart loaded:', cart);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Load cart error:', error);\n    dispatch(setLoading(false));\n  }\n};\nexport const addToCart = (userId, product, size) => async dispatch => {\n  try {\n    const item = {\n      productId: product.id,\n      name: product.name,\n      price: product.price,\n      image: product.image,\n      size,\n      quantity: 1\n    };\n    const cart = await cartAPI.addItem(userId, item);\n    dispatch(setCart(cart));\n    // Refresh cart to ensure UI updates\n    dispatch(loadCart(userId));\n  } catch (error) {\n    console.error('Add to cart failed:', error);\n  }\n};\nexport const updateQuantity = (userId, productId, size, quantity) => async dispatch => {\n  try {\n    const cart = await cartAPI.updateItem(userId, productId, size, quantity);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Update quantity failed:', error);\n  }\n};\nexport const removeFromCart = (userId, productId, size) => async dispatch => {\n  try {\n    const cart = await cartAPI.removeItem(userId, productId, size);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Remove from cart failed:', error);\n  }\n};\nexport const clearCart = userId => async dispatch => {\n  try {\n    const cart = await cartAPI.clearCart(userId);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Clear cart failed:', error);\n  }\n};\nexport const {\n  setCart,\n  setLoading\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","cartAPI","cartSlice","name","initialState","items","total","loading","reducers","setCart","state","action","console","log","payload","totalAmount","setLoading","loadCart","userId","dispatch","cart","getCart","error","addToCart","product","size","item","productId","id","price","image","quantity","addItem","updateQuantity","updateItem","removeFromCart","removeItem","clearCart","actions","reducer"],"sources":["C:/Users/User/OneDrive/Desktop/coding/ecommerce/src/store/cartSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport { cartAPI } from '../utils/api';\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    items: [],\n    total: 0,\n    loading: false\n  },\n  reducers: {\n    setCart: (state, action) => {\n      console.log('Setting cart with payload:', action.payload);\n      state.items = action.payload.items || [];\n      state.total = action.payload.totalAmount || 0;\n      state.loading = false;\n    },\n    setLoading: (state, action) => {\n      state.loading = action.payload;\n    }\n  }\n});\n\n// Async actions\nexport const loadCart = (userId) => async (dispatch) => {\n  try {\n    dispatch(setLoading(true));\n    const cart = await cartAPI.getCart(userId);\n    console.log('Cart loaded:', cart);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Load cart error:', error);\n    dispatch(setLoading(false));\n  }\n};\n\nexport const addToCart = (userId, product, size) => async (dispatch) => {\n  try {\n    const item = {\n      productId: product.id,\n      name: product.name,\n      price: product.price,\n      image: product.image,\n      size,\n      quantity: 1\n    };\n    const cart = await cartAPI.addItem(userId, item);\n    dispatch(setCart(cart));\n    // Refresh cart to ensure UI updates\n    dispatch(loadCart(userId));\n  } catch (error) {\n    console.error('Add to cart failed:', error);\n  }\n};\n\nexport const updateQuantity = (userId, productId, size, quantity) => async (dispatch) => {\n  try {\n    const cart = await cartAPI.updateItem(userId, productId, size, quantity);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Update quantity failed:', error);\n  }\n};\n\nexport const removeFromCart = (userId, productId, size) => async (dispatch) => {\n  try {\n    const cart = await cartAPI.removeItem(userId, productId, size);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Remove from cart failed:', error);\n  }\n};\n\nexport const clearCart = (userId) => async (dispatch) => {\n  try {\n    const cart = await cartAPI.clearCart(userId);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Clear cart failed:', error);\n  }\n};\n\nexport const { setCart, setLoading } = cartSlice.actions;\nexport default cartSlice.reducer;"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,OAAO,QAAQ,cAAc;AAEtC,MAAMC,SAAS,GAAGF,WAAW,CAAC;EAC5BG,IAAI,EAAE,MAAM;EACZC,YAAY,EAAE;IACZC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE,CAAC;IACRC,OAAO,EAAE;EACX,CAAC;EACDC,QAAQ,EAAE;IACRC,OAAO,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC1BC,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEF,MAAM,CAACG,OAAO,CAAC;MACzDJ,KAAK,CAACL,KAAK,GAAGM,MAAM,CAACG,OAAO,CAACT,KAAK,IAAI,EAAE;MACxCK,KAAK,CAACJ,KAAK,GAAGK,MAAM,CAACG,OAAO,CAACC,WAAW,IAAI,CAAC;MAC7CL,KAAK,CAACH,OAAO,GAAG,KAAK;IACvB,CAAC;IACDS,UAAU,EAAEA,CAACN,KAAK,EAAEC,MAAM,KAAK;MAC7BD,KAAK,CAACH,OAAO,GAAGI,MAAM,CAACG,OAAO;IAChC;EACF;AACF,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMG,QAAQ,GAAIC,MAAM,IAAK,MAAOC,QAAQ,IAAK;EACtD,IAAI;IACFA,QAAQ,CAACH,UAAU,CAAC,IAAI,CAAC,CAAC;IAC1B,MAAMI,IAAI,GAAG,MAAMnB,OAAO,CAACoB,OAAO,CAACH,MAAM,CAAC;IAC1CN,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEO,IAAI,CAAC;IACjCD,QAAQ,CAACV,OAAO,CAACW,IAAI,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdV,OAAO,CAACU,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;IACxCH,QAAQ,CAACH,UAAU,CAAC,KAAK,CAAC,CAAC;EAC7B;AACF,CAAC;AAED,OAAO,MAAMO,SAAS,GAAGA,CAACL,MAAM,EAAEM,OAAO,EAAEC,IAAI,KAAK,MAAON,QAAQ,IAAK;EACtE,IAAI;IACF,MAAMO,IAAI,GAAG;MACXC,SAAS,EAAEH,OAAO,CAACI,EAAE;MACrBzB,IAAI,EAAEqB,OAAO,CAACrB,IAAI;MAClB0B,KAAK,EAAEL,OAAO,CAACK,KAAK;MACpBC,KAAK,EAAEN,OAAO,CAACM,KAAK;MACpBL,IAAI;MACJM,QAAQ,EAAE;IACZ,CAAC;IACD,MAAMX,IAAI,GAAG,MAAMnB,OAAO,CAAC+B,OAAO,CAACd,MAAM,EAAEQ,IAAI,CAAC;IAChDP,QAAQ,CAACV,OAAO,CAACW,IAAI,CAAC,CAAC;IACvB;IACAD,QAAQ,CAACF,QAAQ,CAACC,MAAM,CAAC,CAAC;EAC5B,CAAC,CAAC,OAAOI,KAAK,EAAE;IACdV,OAAO,CAACU,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;EAC7C;AACF,CAAC;AAED,OAAO,MAAMW,cAAc,GAAGA,CAACf,MAAM,EAAES,SAAS,EAAEF,IAAI,EAAEM,QAAQ,KAAK,MAAOZ,QAAQ,IAAK;EACvF,IAAI;IACF,MAAMC,IAAI,GAAG,MAAMnB,OAAO,CAACiC,UAAU,CAAChB,MAAM,EAAES,SAAS,EAAEF,IAAI,EAAEM,QAAQ,CAAC;IACxEZ,QAAQ,CAACV,OAAO,CAACW,IAAI,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdV,OAAO,CAACU,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;EACjD;AACF,CAAC;AAED,OAAO,MAAMa,cAAc,GAAGA,CAACjB,MAAM,EAAES,SAAS,EAAEF,IAAI,KAAK,MAAON,QAAQ,IAAK;EAC7E,IAAI;IACF,MAAMC,IAAI,GAAG,MAAMnB,OAAO,CAACmC,UAAU,CAAClB,MAAM,EAAES,SAAS,EAAEF,IAAI,CAAC;IAC9DN,QAAQ,CAACV,OAAO,CAACW,IAAI,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdV,OAAO,CAACU,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;EAClD;AACF,CAAC;AAED,OAAO,MAAMe,SAAS,GAAInB,MAAM,IAAK,MAAOC,QAAQ,IAAK;EACvD,IAAI;IACF,MAAMC,IAAI,GAAG,MAAMnB,OAAO,CAACoC,SAAS,CAACnB,MAAM,CAAC;IAC5CC,QAAQ,CAACV,OAAO,CAACW,IAAI,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdV,OAAO,CAACU,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;EAC5C;AACF,CAAC;AAED,OAAO,MAAM;EAAEb,OAAO;EAAEO;AAAW,CAAC,GAAGd,SAAS,CAACoC,OAAO;AACxD,eAAepC,SAAS,CAACqC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}