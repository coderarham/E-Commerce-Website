{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { authService } from '../utils/authService';\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState: {\n    user: JSON.parse(localStorage.getItem('user')) || null,\n    isAuthenticated: !!localStorage.getItem('user'),\n    loading: false\n  },\n  reducers: {\n    setUser: (state, action) => {\n      state.user = action.payload.user;\n      state.isAuthenticated = true;\n      state.loading = false;\n      localStorage.setItem('user', JSON.stringify(action.payload.user));\n    },\n    logout: state => {\n      state.user = null;\n      state.isAuthenticated = false;\n      state.loading = false;\n      localStorage.removeItem('user');\n    },\n    setLoading: (state, action) => {\n      state.loading = action.payload;\n    }\n  }\n});\n\n// Async actions\nexport const registerUser = (email, password, displayName) => async dispatch => {\n  try {\n    dispatch(setLoading(true));\n    const response = await authService.register(email, password, displayName);\n    dispatch(setUser(response));\n    return response;\n  } catch (error) {\n    dispatch(setLoading(false));\n    throw error;\n  }\n};\nexport const loginUser = (email, password) => async dispatch => {\n  try {\n    dispatch(setLoading(true));\n    const response = await authService.login(email, password);\n    dispatch(setUser(response));\n    return response;\n  } catch (error) {\n    dispatch(setLoading(false));\n    throw error;\n  }\n};\nexport const socialLogin = provider => async dispatch => {\n  try {\n    dispatch(setLoading(true));\n    let response;\n    switch (provider) {\n      case 'google':\n        response = await authService.signInWithGoogle();\n        break;\n      case 'microsoft':\n        response = await authService.signInWithMicrosoft();\n        break;\n      case 'apple':\n        response = await authService.signInWithApple();\n        break;\n      default:\n        throw new Error('Invalid provider');\n    }\n    dispatch(setUser(response));\n    return response;\n  } catch (error) {\n    dispatch(setLoading(false));\n    throw error;\n  }\n};\nexport const logoutUser = () => async dispatch => {\n  try {\n    await authService.logout();\n    dispatch(logout());\n  } catch (error) {\n    console.error('Logout error:', error);\n  }\n};\nexport const initializeAuth = () => async dispatch => {\n  return authService.onAuthStateChange(userData => {\n    if (userData) {\n      dispatch(setUser(userData));\n    } else {\n      dispatch(logout());\n    }\n  });\n};\nexport const {\n  setUser,\n  logout,\n  setLoading\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","authService","authSlice","name","initialState","user","JSON","parse","localStorage","getItem","isAuthenticated","loading","reducers","setUser","state","action","payload","setItem","stringify","logout","removeItem","setLoading","registerUser","email","password","displayName","dispatch","response","register","error","loginUser","login","socialLogin","provider","signInWithGoogle","signInWithMicrosoft","signInWithApple","Error","logoutUser","console","initializeAuth","onAuthStateChange","userData","actions","reducer"],"sources":["C:/Users/User/OneDrive/Desktop/coding/ecommerce/src/store/authSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport { authService } from '../utils/authService';\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState: {\n    user: JSON.parse(localStorage.getItem('user')) || null,\n    isAuthenticated: !!localStorage.getItem('user'),\n    loading: false,\n  },\n  reducers: {\n    setUser: (state, action) => {\n      state.user = action.payload.user;\n      state.isAuthenticated = true;\n      state.loading = false;\n      localStorage.setItem('user', JSON.stringify(action.payload.user));\n    },\n    logout: (state) => {\n      state.user = null;\n      state.isAuthenticated = false;\n      state.loading = false;\n      localStorage.removeItem('user');\n    },\n    setLoading: (state, action) => {\n      state.loading = action.payload;\n    },\n  },\n});\n\n// Async actions\nexport const registerUser = (email, password, displayName) => async (dispatch) => {\n  try {\n    dispatch(setLoading(true));\n    const response = await authService.register(email, password, displayName);\n    dispatch(setUser(response));\n    return response;\n  } catch (error) {\n    dispatch(setLoading(false));\n    throw error;\n  }\n};\n\nexport const loginUser = (email, password) => async (dispatch) => {\n  try {\n    dispatch(setLoading(true));\n    const response = await authService.login(email, password);\n    dispatch(setUser(response));\n    return response;\n  } catch (error) {\n    dispatch(setLoading(false));\n    throw error;\n  }\n};\n\nexport const socialLogin = (provider) => async (dispatch) => {\n  try {\n    dispatch(setLoading(true));\n    let response;\n    switch (provider) {\n      case 'google':\n        response = await authService.signInWithGoogle();\n        break;\n      case 'microsoft':\n        response = await authService.signInWithMicrosoft();\n        break;\n      case 'apple':\n        response = await authService.signInWithApple();\n        break;\n      default:\n        throw new Error('Invalid provider');\n    }\n    dispatch(setUser(response));\n    return response;\n  } catch (error) {\n    dispatch(setLoading(false));\n    throw error;\n  }\n};\n\nexport const logoutUser = () => async (dispatch) => {\n  try {\n    await authService.logout();\n    dispatch(logout());\n  } catch (error) {\n    console.error('Logout error:', error);\n  }\n};\n\nexport const initializeAuth = () => async (dispatch) => {\n  return authService.onAuthStateChange((userData) => {\n    if (userData) {\n      dispatch(setUser(userData));\n    } else {\n      dispatch(logout());\n    }\n  });\n};\n\nexport const { setUser, logout, setLoading } = authSlice.actions;\nexport default authSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}