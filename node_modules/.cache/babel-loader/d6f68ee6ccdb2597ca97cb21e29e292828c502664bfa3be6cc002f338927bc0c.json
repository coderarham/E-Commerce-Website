{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { cartAPI } from '../utils/api';\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    items: [],\n    total: 0,\n    loading: false\n  },\n  reducers: {\n    setCart: (state, action) => {\n      state.items = action.payload.items || [];\n      state.total = action.payload.totalAmount || 0;\n      state.loading = false;\n    },\n    setLoading: (state, action) => {\n      state.loading = action.payload;\n    }\n  }\n});\n\n// Async actions\nexport const loadCart = userId => async dispatch => {\n  try {\n    dispatch(setLoading(true));\n    const cart = await cartAPI.getCart(userId);\n    dispatch(setCart(cart));\n  } catch (error) {\n    dispatch(setLoading(false));\n  }\n};\nexport const addToCart = (userId, product, size) => async dispatch => {\n  try {\n    const item = {\n      productId: product.id,\n      name: product.name,\n      price: product.price,\n      image: product.image,\n      size,\n      quantity: 1\n    };\n    const cart = await cartAPI.addItem(userId, item);\n    dispatch(setCart(cart));\n    // Refresh cart to ensure UI updates\n    dispatch(loadCart(userId));\n  } catch (error) {\n    console.error('Add to cart failed:', error);\n  }\n};\nexport const updateQuantity = (userId, productId, size, quantity) => async dispatch => {\n  try {\n    const cart = await cartAPI.updateItem(userId, productId, size, quantity);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Update quantity failed:', error);\n  }\n};\nexport const removeFromCart = (userId, productId, size) => async dispatch => {\n  try {\n    const cart = await cartAPI.removeItem(userId, productId, size);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Remove from cart failed:', error);\n  }\n};\nexport const clearCart = userId => async dispatch => {\n  try {\n    const cart = await cartAPI.clearCart(userId);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Clear cart failed:', error);\n  }\n};\nexport const {\n  setCart,\n  setLoading\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","cartAPI","cartSlice","name","initialState","items","total","loading","reducers","setCart","state","action","payload","totalAmount","setLoading","loadCart","userId","dispatch","cart","getCart","error","addToCart","product","size","item","productId","id","price","image","quantity","addItem","console","updateQuantity","updateItem","removeFromCart","removeItem","clearCart","actions","reducer"],"sources":["C:/Users/User/OneDrive/Desktop/coding/ecommerce/src/store/cartSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport { cartAPI } from '../utils/api';\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    items: [],\n    total: 0,\n    loading: false\n  },\n  reducers: {\n    setCart: (state, action) => {\n      state.items = action.payload.items || [];\n      state.total = action.payload.totalAmount || 0;\n      state.loading = false;\n    },\n    setLoading: (state, action) => {\n      state.loading = action.payload;\n    }\n  }\n});\n\n// Async actions\nexport const loadCart = (userId) => async (dispatch) => {\n  try {\n    dispatch(setLoading(true));\n    const cart = await cartAPI.getCart(userId);\n    dispatch(setCart(cart));\n  } catch (error) {\n    dispatch(setLoading(false));\n  }\n};\n\nexport const addToCart = (userId, product, size) => async (dispatch) => {\n  try {\n    const item = {\n      productId: product.id,\n      name: product.name,\n      price: product.price,\n      image: product.image,\n      size,\n      quantity: 1\n    };\n    const cart = await cartAPI.addItem(userId, item);\n    dispatch(setCart(cart));\n    // Refresh cart to ensure UI updates\n    dispatch(loadCart(userId));\n  } catch (error) {\n    console.error('Add to cart failed:', error);\n  }\n};\n\nexport const updateQuantity = (userId, productId, size, quantity) => async (dispatch) => {\n  try {\n    const cart = await cartAPI.updateItem(userId, productId, size, quantity);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Update quantity failed:', error);\n  }\n};\n\nexport const removeFromCart = (userId, productId, size) => async (dispatch) => {\n  try {\n    const cart = await cartAPI.removeItem(userId, productId, size);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Remove from cart failed:', error);\n  }\n};\n\nexport const clearCart = (userId) => async (dispatch) => {\n  try {\n    const cart = await cartAPI.clearCart(userId);\n    dispatch(setCart(cart));\n  } catch (error) {\n    console.error('Clear cart failed:', error);\n  }\n};\n\nexport const { setCart, setLoading } = cartSlice.actions;\nexport default cartSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}