{"ast":null,"code":"import { db } from './firebase';\nimport { doc, getDoc, setDoc, updateDoc, deleteDoc, collection } from 'firebase/firestore';\nexport const cartService = {\n  // Get user's cart\n  getCart: async userId => {\n    try {\n      const cartDoc = await getDoc(doc(db, 'carts', userId));\n      if (cartDoc.exists()) {\n        return cartDoc.data();\n      }\n      return {\n        items: [],\n        total: 0\n      };\n    } catch (error) {\n      console.error('Error getting cart:', error);\n      return {\n        items: [],\n        total: 0\n      };\n    }\n  },\n  // Add item to cart\n  addItem: async (userId, product, size) => {\n    try {\n      const cartRef = doc(db, 'carts', userId);\n      const cartDoc = await getDoc(cartRef);\n      let cart = cartDoc.exists() ? cartDoc.data() : {\n        items: [],\n        total: 0\n      };\n      const existingItemIndex = cart.items.findIndex(item => item.productId === product.id && item.size === size);\n      if (existingItemIndex >= 0) {\n        cart.items[existingItemIndex].quantity += 1;\n      } else {\n        cart.items.push({\n          productId: product.id,\n          name: product.name,\n          price: product.price,\n          image: product.image,\n          size,\n          quantity: 1\n        });\n      }\n      cart.total = cart.items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n      await setDoc(cartRef, cart);\n      return cart;\n    } catch (error) {\n      console.error('Error adding to cart:', error);\n      throw error;\n    }\n  },\n  // Update item quantity\n  updateQuantity: async (userId, productId, size, quantity) => {\n    try {\n      const cartRef = doc(db, 'carts', userId);\n      const cartDoc = await getDoc(cartRef);\n      if (!cartDoc.exists()) return {\n        items: [],\n        total: 0\n      };\n      let cart = cartDoc.data();\n      const itemIndex = cart.items.findIndex(item => item.productId === productId && item.size === size);\n      if (itemIndex >= 0) {\n        if (quantity <= 0) {\n          cart.items.splice(itemIndex, 1);\n        } else {\n          cart.items[itemIndex].quantity = quantity;\n        }\n        cart.total = cart.items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n        await setDoc(cartRef, cart);\n      }\n      return cart;\n    } catch (error) {\n      console.error('Error updating quantity:', error);\n      throw error;\n    }\n  },\n  // Remove item from cart\n  removeItem: async (userId, productId, size) => {\n    try {\n      const cartRef = doc(db, 'carts', userId);\n      const cartDoc = await getDoc(cartRef);\n      if (!cartDoc.exists()) return {\n        items: [],\n        total: 0\n      };\n      let cart = cartDoc.data();\n      cart.items = cart.items.filter(item => !(item.productId === productId && item.size === size));\n      cart.total = cart.items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n      await setDoc(cartRef, cart);\n      return cart;\n    } catch (error) {\n      console.error('Error removing item:', error);\n      throw error;\n    }\n  },\n  // Clear entire cart\n  clearCart: async userId => {\n    try {\n      await deleteDoc(doc(db, 'carts', userId));\n      return {\n        items: [],\n        total: 0\n      };\n    } catch (error) {\n      console.error('Error clearing cart:', error);\n      throw error;\n    }\n  }\n};","map":{"version":3,"names":["db","doc","getDoc","setDoc","updateDoc","deleteDoc","collection","cartService","getCart","userId","cartDoc","exists","data","items","total","error","console","addItem","product","size","cartRef","cart","existingItemIndex","findIndex","item","productId","id","quantity","push","name","price","image","reduce","sum","updateQuantity","itemIndex","splice","removeItem","filter","clearCart"],"sources":["C:/Users/User/OneDrive/Desktop/coding/ecommerce/src/utils/cartService.js"],"sourcesContent":["import { db } from './firebase';\nimport { doc, getDoc, setDoc, updateDoc, deleteDoc, collection } from 'firebase/firestore';\n\nexport const cartService = {\n  // Get user's cart\n  getCart: async (userId) => {\n    try {\n      const cartDoc = await getDoc(doc(db, 'carts', userId));\n      if (cartDoc.exists()) {\n        return cartDoc.data();\n      }\n      return { items: [], total: 0 };\n    } catch (error) {\n      console.error('Error getting cart:', error);\n      return { items: [], total: 0 };\n    }\n  },\n\n  // Add item to cart\n  addItem: async (userId, product, size) => {\n    try {\n      const cartRef = doc(db, 'carts', userId);\n      const cartDoc = await getDoc(cartRef);\n      \n      let cart = cartDoc.exists() ? cartDoc.data() : { items: [], total: 0 };\n      \n      const existingItemIndex = cart.items.findIndex(\n        item => item.productId === product.id && item.size === size\n      );\n      \n      if (existingItemIndex >= 0) {\n        cart.items[existingItemIndex].quantity += 1;\n      } else {\n        cart.items.push({\n          productId: product.id,\n          name: product.name,\n          price: product.price,\n          image: product.image,\n          size,\n          quantity: 1\n        });\n      }\n      \n      cart.total = cart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n      \n      await setDoc(cartRef, cart);\n      return cart;\n    } catch (error) {\n      console.error('Error adding to cart:', error);\n      throw error;\n    }\n  },\n\n  // Update item quantity\n  updateQuantity: async (userId, productId, size, quantity) => {\n    try {\n      const cartRef = doc(db, 'carts', userId);\n      const cartDoc = await getDoc(cartRef);\n      \n      if (!cartDoc.exists()) return { items: [], total: 0 };\n      \n      let cart = cartDoc.data();\n      const itemIndex = cart.items.findIndex(\n        item => item.productId === productId && item.size === size\n      );\n      \n      if (itemIndex >= 0) {\n        if (quantity <= 0) {\n          cart.items.splice(itemIndex, 1);\n        } else {\n          cart.items[itemIndex].quantity = quantity;\n        }\n        \n        cart.total = cart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n        await setDoc(cartRef, cart);\n      }\n      \n      return cart;\n    } catch (error) {\n      console.error('Error updating quantity:', error);\n      throw error;\n    }\n  },\n\n  // Remove item from cart\n  removeItem: async (userId, productId, size) => {\n    try {\n      const cartRef = doc(db, 'carts', userId);\n      const cartDoc = await getDoc(cartRef);\n      \n      if (!cartDoc.exists()) return { items: [], total: 0 };\n      \n      let cart = cartDoc.data();\n      cart.items = cart.items.filter(\n        item => !(item.productId === productId && item.size === size)\n      );\n      \n      cart.total = cart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n      \n      await setDoc(cartRef, cart);\n      return cart;\n    } catch (error) {\n      console.error('Error removing item:', error);\n      throw error;\n    }\n  },\n\n  // Clear entire cart\n  clearCart: async (userId) => {\n    try {\n      await deleteDoc(doc(db, 'carts', userId));\n      return { items: [], total: 0 };\n    } catch (error) {\n      console.error('Error clearing cart:', error);\n      throw error;\n    }\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}